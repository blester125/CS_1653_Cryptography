<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CS 1653 Project P5 Writeup</title>
  <style>
/* BEGIN CHANGES HERE */

/* In this section, you may add CSS styling if desired */
header {
  text-align: center;
}

/* END CHANGES HERE */
  </style>
  <body>
    <header>
      <h1>CS 1653 Project P5 Writeup</h1>
      <h2>
<!-- BEGIN CHANGES HERE -->

Brian Lester, bdl20@pitt.edu <br>
Ryan Conley, rgc11@pitt.edu <br>
Carmen Condeluci, crc73@pitt.edu <br>

<!-- END CHANGES HERE -->
      </h2>
    </header>
    <section id="overview">
      <h2>Overview</h2>
<!-- BEGIN CHANGES HERE -->

<p>In this section, broadly overview your threat model, attacks, and
countermeasures.</p>

<!-- END CHANGES HERE -->
    </section>
    <section id="threatmodel">
      <h2>Threat Model</h2>
<!-- BEGIN CHANGES HERE -->

<p>Define a threat model within which your implementation is subject to attack.
You may re-use a threat model from another phase of the project, or you may
define a new threat model (e.g., What if we were worried about more than just
the file leakage from a file server? What if the group server was mostly
trusted, but the password file or other state was somehow leaked? What about the
possibility of DoS or DDoS attacks?). This threat model should be written up in
the same format as the threat models that you were given for Phases P3 and P4 of
the project.</p>


    <section id="threat8">
      <h2>Threat T8: Snooping System Admin</h2>
<!-- BEGIN CHANGES HERE -->


<!-- END CHANGES HERE -->
    </section>

    <section id="threat9">
      <h2>Threat T9: File Modification</h2>
<!-- BEGIN CHANGES HERE -->


<!-- END CHANGES HERE -->
    </section>

    <section id="threat10">
      <h2>Threat T10: Unprotected File Server Key</h2>
<!-- BEGIN CHANGES HERE -->

<p>
Our current implementation of file servers provide no protection against the 
theft of a file server's private RSA key (in the case of the machine being 
compromised). Despite file servers being largely untrusted, it is still an 
issue to provide absolutely no protection against the physical compromise of a 
file server. In the event of a file server machine being compromised in our 
current implementation, an attacker could host a fake file server that would 
act as an already-authenticated file server. This server could then proceed to 
host malicious versions of user files or simply leak the files to other users or 
onto the internet (although we have already protected against this in T6 of 
Phase 4 via the Leslie-Lamport one-time password scheme). 
</p>

<p>
In order to defend against this threat, a mechanism must be developed to protect 
the existence of the file server's private RSA key on disk, so that even if the 
key is physically stolen, it cannot be used by an attacker to host a fake file 
server. This can be achieved through the use of the "starter's" (file server 
administrator's) private key. On the execution of the file server, the starter's 
private RSA key is used to generate a confidentiality and integrity key that 
will be used to encrypt and verify the file server's private RSA key when it is 
loaded from disk. The two keys are <b>k<sub>c</sub></b>, used for encryption, 
and <b>k<sub>i</sub></b> which is used for integrity checks. The keys are 
generated by hashing, using SHA-256, the starter's private RSA key concatenated 
with "confidentiality" and "integrity" respectively. After the file server 
private key is successfully loaded and verified, it is used as normal throughout 
the system as outlined in our previous phases.
</p>

<p>
This mechanism is sufficient for defending against this threat due to the fact 
that the starter of the file server is, or is physically verified by, the system 
administrator. In addition, this administrator is tasked with the responsibility 
of keeping his private RSA key (used to create <b>k<sub>c</sub></b> and 
<b>k<sub>i</sub></b> to protect the file server private RSA key) safe from 
compromise. This means that the key used to protect the file server private key 
is not present on the system outside of the initial starting of the file server, 
and will not be stolen in the result of a machine compromise of any verified 
file server.
</p>



<!-- END CHANGES HERE -->
    </section>

    <section id="threat11">
      <h2>Threat T11: Lack of Plausible Deniability</h2>
<!-- BEGIN CHANGES HERE -->

<p>
In our current system, no communication provides any form of plausible 
deniability to any of the parties involved. This is due primarily to the use of 
signed Diffie-Hellmen to create secure sessions between both the client and the 
group server and the client and the file server. Since the first two messages of 
protocol are signed with the sender's respective private keys, any third party 
can discover the identity of the parties involved by examining message logs of 
any communications throughout our file sharing system. An attacker that has 
compromised any of the parties involved could send sensitive, innapropriate, or 
"illegal" data after authenticating with another party, then effectively 
"blackmail" the original compromised user with message logs "proving" that 
user's supposed misuse of the system, or simply release the message log to the 
internet in an attempt to undermine the validity of the file sharing system.
</p>

<p>
Thankfully, this issue is not terribly complex to design a mechanism to defend 
against. Instead of signing the messages in our Diffie-Hellman protocol (as in 
Phase 4, T5), we will encrypt them with each party's respective public RSA keys. 
In this version of Diffie-Hellman, each party is still sure that only the 
intended recipient could have correctly responded successive messages in the 
protocol due to security properties of public key cryptography. However, a third 
party would not be able to verify that any individual party truly sent any given 
message, as anyone could generate a false message log as the information used in 
each pre-secured message of the protocol utilizes only publicly known
information. By making this change to the Diffie-Hellman protocols used to set 
up secure connections between clients, group servers, and file serevers, we can 
effectively provide all parties involved in communication in our system 
plausible deniability.
</p>

<p>
This mechanism adequately provides plausible deniability to users of our file 
sharing system. Since only an individual has access to their private RSA key and 
they are trusted to keep that key safe, it is acceptable to use them in order to 
verify the indentity of the recipient of messages throughout the various uses of 
the Diffie-Hellman protocol to set up secure communication between two parties. 
Furthermore, all set up for secure communication throughout the system now uses 
only publicly available information, so message logs cannot be used to verify 
message recipients or senders any longer.
</p>

<!-- END CHANGES HERE -->
    </section>    


<!-- END CHANGES HERE -->
    </section>
    <section id="attack">
      <h2>Attacks</h2>
<!-- BEGIN CHANGES HERE -->

<p>Write a clear and concise description of the attacks against your
implementation. Describe each step of the attack, and include protocol diagrams
to clarify your discussion as needed. Provide evidence for why these attacks are
possible, and why they represent a threat against your system.</p>

<p>If your group implemented programs to demonstrate your attacks, discuss these
programs here.</p>

<!-- END CHANGES HERE -->
    </section>
    <section id="countermeasure">
      <h2>Countermeasures</h2>
<!-- BEGIN CHANGES HERE -->

<p>Write a clear and concise description of the mechanism that your group
proposes to address each attack from the previous section. Follow the format
described in Phases P3 and P4 of the project: describe the mechanism in detail
(including protocol diagrams as needed) and provide justification for why your
proposed mechanism is sufficient for addressing the threat that you have
discovered.</p>

<!-- END CHANGES HERE -->
    </section>
    <section id="discussion">
      <h2>Discussion</h2>
<!-- BEGIN CHANGES HERE -->

<p>Conclude with a paragraph or two discussing your threat model and
countermeasure mechanisms. How realistic is your threat model for a real-life
file sharing system? Comment on the design process that your group followed. Did
you discuss other ideas that didn’t pan out before settling on the
above-documented approach? Did you design attacks that you were unable to
mitigate, or that you think are impossible to mitigate? Use this space to show
off your hard work!</p>

<p>Finally, spend a paragraph discussing the interplay between the
countermeasures for your proposed attacks and your techniques for mitigating
threats T1–T7 from Phases P3 and P4 of the project. Did you have to design your
countermeasures in a particular way so as not to re-introduce these older
threats?</p>

<p>If your group implemented the countermeasures or did any extra credit, please
discuss these additional contributions in this section, as well.</p>

<!-- END CHANGES HERE -->
    </section>
  </body>
</html>

